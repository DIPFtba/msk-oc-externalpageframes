(()=>{"use strict";var t,e={1052:(t,e,n)=>{var r=n(688),i=n(3397),o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not a function")}},586:(t,e,n)=>{var r=n(2032),i=n(8536),o=n(2131).f,s=r("unscopables"),a=Array.prototype;void 0===a[s]&&o(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},9175:(t,e,n)=>{var r=n(5309),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not an object")}},1138:(t,e,n)=>{var r=n(6854),i=n(7352),o=n(8344),s=function(t){return function(e,n,s){var a=r(e),l=o(a);if(0===l)return!t&&-1;var c,u=i(s,l);if(t&&n!=n){for(;l>u;)if((c=a[u++])!=c)return!0}else for(;l>u;u++)if((t||u in a)&&a[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},6207:(t,e,n)=>{var r=n(9924),i=n(256),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!s(t,"length").writable)throw new o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},2177:(t,e,n)=>{var r=n(9668),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},3891:(t,e,n)=>{var r=n(4678),i=n(990),o=n(7537),s=n(2131);t.exports=function(t,e,n){for(var a=i(e),l=s.f,c=o.f,u=0;u<a.length;u++){var d=a[u];r(t,d)||n&&r(n,d)||l(t,d,c(e,d))}}},2385:(t,e,n)=>{var r=n(9924),i=n(2131),o=n(7781);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},7781:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2470:(t,e,n)=>{var r=n(688),i=n(2131),o=n(1135),s=n(1604);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(r(n)&&o(n,c,a),a.global)l?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},1604:(t,e,n)=>{var r=n(2150),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},9924:(t,e,n)=>{var r=n(4694);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},1442:(t,e,n)=>{var r=n(2150),i=n(5309),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},3433:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},1370:t=>{t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7067:(t,e,n)=>{var r,i,o=n(2150),s=n(1370),a=o.process,l=o.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=+r[1]),t.exports=i},2367:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},5532:(t,e,n)=>{var r=n(2150),i=n(7537).f,o=n(2385),s=n(2470),a=n(1604),l=n(3891),c=n(1633);t.exports=function(t,e){var n,u,d,h,f,p=t.target,g=t.global,v=t.stat;if(n=g?r:v?r[p]||a(p,{}):r[p]&&r[p].prototype)for(u in e){if(h=e[u],d=t.dontCallGetSet?(f=i(n,u))&&f.value:n[u],!c(g?u:p+(v?".":"#")+u,t.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(t.sham||d&&d.sham)&&o(h,"sham",!0),s(n,u,h,t)}}},4694:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},6398:(t,e,n)=>{var r=n(4694);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},8724:(t,e,n)=>{var r=n(6398),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},453:(t,e,n)=>{var r=n(9924),i=n(4678),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),l=a&&"something"===function(){}.name,c=a&&(!r||r&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},9668:(t,e,n)=>{var r=n(6398),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);t.exports=r?s:function(t){return function(){return o.apply(t,arguments)}}},2160:(t,e,n)=>{var r=n(2150),i=n(688),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t]):r[t]&&r[t][e]}},5383:(t,e,n)=>{var r=n(1052),i=n(5268);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},2150:function(t,e,n){var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4678:(t,e,n)=>{var r=n(9668),i=n(298),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},7390:t=>{t.exports={}},8651:(t,e,n)=>{var r=n(2160);t.exports=r("document","documentElement")},7913:(t,e,n)=>{var r=n(9924),i=n(4694),o=n(1442);t.exports=!r&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},4347:(t,e,n)=>{var r=n(9668),i=n(4694),o=n(2177),s=Object,a=r("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},1881:(t,e,n)=>{var r=n(9668),i=n(688),o=n(6762),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},7804:(t,e,n)=>{var r,i,o,s=n(4724),a=n(2150),l=n(5309),c=n(2385),u=n(4678),d=n(6762),h=n(1962),f=n(7390),p="Object already initialized",g=a.TypeError,v=a.WeakMap;if(s||d.state){var b=d.state||(d.state=new v);b.get=b.get,b.has=b.has,b.set=b.set,r=function(t,e){if(b.has(t))throw new g(p);return e.facade=t,b.set(t,e),e},i=function(t){return b.get(t)||{}},o=function(t){return b.has(t)}}else{var m=h("state");f[m]=!0,r=function(t,e){if(u(t,m))throw new g(p);return e.facade=t,c(t,m,e),e},i=function(t){return u(t,m)?t[m]:{}},o=function(t){return u(t,m)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!l(e)||(n=i(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return n}}}},256:(t,e,n)=>{var r=n(2177);t.exports=Array.isArray||function(t){return"Array"===r(t)}},688:t=>{var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},1633:(t,e,n)=>{var r=n(4694),i=n(688),o=/#|\.prototype\./,s=function(t,e){var n=l[a(t)];return n===u||n!==c&&(i(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},5268:t=>{t.exports=function(t){return null==t}},5309:(t,e,n)=>{var r=n(688);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},6555:t=>{t.exports=!1},7935:(t,e,n)=>{var r=n(2160),i=n(688),o=n(6148),s=n(4866),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&o(e.prototype,a(t))}},8344:(t,e,n)=>{var r=n(7331);t.exports=function(t){return r(t.length)}},1135:(t,e,n)=>{var r=n(9668),i=n(4694),o=n(688),s=n(4678),a=n(9924),l=n(453).CONFIGURABLE,c=n(1881),u=n(7804),d=u.enforce,h=u.get,f=String,p=Object.defineProperty,g=r("".slice),v=r("".replace),b=r([].join),m=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),y=String(String).split("String"),S=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+v(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),m&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=d(t);return s(r,"source")||(r.source=b(y,"string"==typeof e?e:"")),t};Function.prototype.toString=S((function(){return o(this)&&h(this).source||c(this)}),"toString")},1787:t=>{var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},8536:(t,e,n)=>{var r,i=n(9175),o=n(227),s=n(2367),a=n(7390),l=n(8651),c=n(1442),u=n(1962),d="prototype",h="script",f=u("IE_PROTO"),p=function(){},g=function(t){return"<"+h+">"+t+"</"+h+">"},v=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;b="undefined"!=typeof document?document.domain&&r?v(r):(e=c("iframe"),n="java"+h+":",e.style.display="none",l.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(g("document.F=Object")),t.close(),t.F):v(r);for(var i=s.length;i--;)delete b[d][s[i]];return b()};a[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p[d]=i(t),n=new p,p[d]=null,n[f]=t):n=b(),void 0===e?n:o.f(n,e)}},227:(t,e,n)=>{var r=n(9924),i=n(2666),o=n(2131),s=n(9175),a=n(6854),l=n(1728);e.f=r&&!i?Object.defineProperties:function(t,e){s(t);for(var n,r=a(e),i=l(e),c=i.length,u=0;c>u;)o.f(t,n=i[u++],r[n]);return t}},2131:(t,e,n)=>{var r=n(9924),i=n(7913),o=n(2666),s=n(9175),a=n(2358),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",f="writable";e.f=r?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=u(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:d in n?n[d]:r[d],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),i)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},7537:(t,e,n)=>{var r=n(9924),i=n(8724),o=n(8208),s=n(7781),a=n(6854),l=n(2358),c=n(4678),u=n(7913),d=Object.getOwnPropertyDescriptor;e.f=r?d:function(t,e){if(t=a(t),e=l(e),u)try{return d(t,e)}catch(t){}if(c(t,e))return s(!i(o.f,t,e),t[e])}},6217:(t,e,n)=>{var r=n(1528),i=n(2367).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},5168:(t,e)=>{e.f=Object.getOwnPropertySymbols},6148:(t,e,n)=>{var r=n(9668);t.exports=r({}.isPrototypeOf)},1528:(t,e,n)=>{var r=n(9668),i=n(4678),o=n(6854),s=n(1138).indexOf,a=n(7390),l=r([].push);t.exports=function(t,e){var n,r=o(t),c=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&l(u,n);for(;e.length>c;)i(r,n=e[c++])&&(~s(u,n)||l(u,n));return u}},1728:(t,e,n)=>{var r=n(1528),i=n(2367);t.exports=Object.keys||function(t){return r(t,i)}},8208:(t,e)=>{var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},110:(t,e,n)=>{var r=n(8724),i=n(688),o=n(5309),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!o(a=r(n,t)))return a;if(i(n=t.valueOf)&&!o(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!o(a=r(n,t)))return a;throw new s("Can't convert object to primitive value")}},990:(t,e,n)=>{var r=n(2160),i=n(9668),o=n(6217),s=n(5168),a=n(9175),l=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?l(e,n(t)):e}},1166:(t,e,n)=>{var r=n(5268),i=TypeError;t.exports=function(t){if(r(t))throw new i("Can't call method on "+t);return t}},1962:(t,e,n)=>{var r=n(2645),i=n(5736),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},6762:(t,e,n)=>{var r=n(6555),i=n(2150),o=n(1604),s="__core-js_shared__",a=t.exports=i[s]||o(s,{});(a.versions||(a.versions=[])).push({version:"3.36.1",mode:r?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},2645:(t,e,n)=>{var r=n(6762);t.exports=function(t,e){return r[t]||(r[t]=e||{})}},4112:(t,e,n)=>{var r=n(7067),i=n(4694),o=n(2150).String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},7352:(t,e,n)=>{var r=n(1680),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},6854:(t,e,n)=>{var r=n(4347),i=n(1166);t.exports=function(t){return r(i(t))}},1680:(t,e,n)=>{var r=n(1787);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},7331:(t,e,n)=>{var r=n(1680),i=Math.min;t.exports=function(t){var e=r(t);return e>0?i(e,9007199254740991):0}},298:(t,e,n)=>{var r=n(1166),i=Object;t.exports=function(t){return i(r(t))}},1272:(t,e,n)=>{var r=n(8724),i=n(5309),o=n(7935),s=n(5383),a=n(110),l=n(2032),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var n,l=s(t,u);if(l){if(void 0===e&&(e="default"),n=r(l,t,e),!i(n)||o(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},2358:(t,e,n)=>{var r=n(1272),i=n(7935);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},3397:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},5736:(t,e,n)=>{var r=n(9668),i=0,o=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},4866:(t,e,n)=>{var r=n(4112);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2666:(t,e,n)=>{var r=n(9924),i=n(4694);t.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4724:(t,e,n)=>{var r=n(2150),i=n(688),o=r.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},2032:(t,e,n)=>{var r=n(2150),i=n(2645),o=n(4678),s=n(5736),a=n(4112),l=n(4866),c=r.Symbol,u=i("wks"),d=l?c.for||c:c&&c.withoutSetter||s;t.exports=function(t){return o(u,t)||(u[t]=a&&o(c,t)?c[t]:d("Symbol."+t)),u[t]}},452:(t,e,n)=>{var r=n(5532),i=n(1138).includes,o=n(4694),s=n(586);r({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},4936:(t,e,n)=>{var r=n(5532),i=n(298),o=n(8344),s=n(6207),a=n(3433);r({target:"Array",proto:!0,arity:1,forced:n(4694)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=i(this),n=o(e),r=arguments.length;a(n+r);for(var l=0;l<r;l++)e[n]=arguments[l],n++;return s(e,n),n}})}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}};return e[t].call(o.exports,o,o.exports,r),o.exports}r.m=e,r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,n)=>(r.f[n](t,e),e)),[])),r.u=t=>"sce.js",r.miniCssF=t=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},r.l=(e,n,i,o)=>{if(t[e])t[e].push(n);else{var s,a;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==e){s=u;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=e),t[e]=[n];var d=(n,r)=>{s.onerror=s.onload=null,clearTimeout(h);var i=t[e];if(delete t[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((t=>t(r))),n)return n(r)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),a&&document.head.appendChild(s)}},r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={179:0};r.f.j=(e,n)=>{var i=r.o(t,e)?t[e]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise(((n,r)=>i=t[e]=[n,r]));n.push(i[2]=o);var s=r.p+r.u(e),a=new Error;r.l(s,(n=>{if(r.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+e,e)}};var e=(e,n)=>{var i,o,[s,a,l]=n,c=0;if(s.some((e=>0!==t[e]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);l&&l(r)}for(e&&e(n);c<s.length;c++)o=s[c],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),(()=>{function t(t,e,n){return t>=Math.min(e,n)&&t<=Math.max(e,n)}function e(t,e,n,r,i){const o=`0*${e}(?:[,.]0*)?`,s=new RegExp(`^(?:${r?`${o}(?: *${n})?|(?:${n} *)?${o}`:`${o} *${n}|${n} *${o}`})${i?"?":""}$`);return t.trim().match(s)}function n(t,e){const r=t=>t&&"object"==typeof t;return r(t)&&r(e)?(Object.keys(e).forEach((i=>{const o=t[i],s=e[i];Array.isArray(s)?t[i]=s:r(o)&&r(s)?t[i]=n(Object.assign({},o),s):t[i]=s})),t):e}function i(t,e){if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;if(t.constructor!==e.constructor)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(t.length!=e.length)return!1;const n=Array.from(e);return!!t.every((t=>n.some(((e,r)=>!!i(t,e)&&(n.splice(r,1),!0)))))&&0===n.length}for(var n in t)if(t.hasOwnProperty(n)){if(!e.hasOwnProperty(n))return!1;if(t[n]!==e[n]){if("object"!=typeof t[n])return!1;if(!i(t[n],e[n]))return!1}}for(n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}r(452),r(4936);class o{constructor(){this.indexPath=this.getQueryVariable("indexPath"),this.userDefIdPath=this.getQueryVariable("userDefIdPath"),this.traceCount=0}setFSMVariable(t,e){this.postMessageWithPathsAndTraceCount({setVariable:{variableName:t,newValue:e}})}postLogEvent(t){this.postMessageWithPathsAndTraceCount({traceMessage:t})}triggerEvent(t){this.postMessageWithPathsAndTraceCount({microfinEvent:t})}postMessageWithPathsAndTraceCount(t){try{t.indexPath=this.indexPath,t.userDefIdPath=this.userDefIdPath,t.traceCount=this.traceCount++,window.parent.postMessage(JSON.stringify(t),"*")}catch(t){console.error(t)}}getQueryVariable(t){return new URL(window.location.href).searchParams.get(t)}startListeningToVariableDeclarationRequests(t){window.addEventListener("message",(e=>{try{const{callId:n}=JSON.parse(e.data);if(void 0!==n&&n.includes("importVariables")){const e={initialVariables:t(),callId:n};window.parent.postMessage(JSON.stringify(e),"*")}}catch(t){}}),!1)}debugOut(t){}}class s{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.assign(this,{container:null,addSendChangeState:null},t),this.fsm||(this.fsm=new o,this.fsm.startListeningToVariableDeclarationRequests(this.declareVariables.bind(this))),t.container){this.width||(this.width=window.innerWidth),this.height||(this.height=window.innerHeight),this.stage=new Konva.Stage({container:this.container,width:this.width,height:this.height});const t="BW_IB_EXTRES_STAGES";t in window||(window[t]=[]),window[t].push(this.stage)}document.addEventListener("contextmenu",(t=>t.preventDefault())),this.FSMVarsSent={}}postLog(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.stage&&this.stage.isDemoAni||this.fsm.postLogEvent(Object.assign({},e,{event:t}))}postVariable(t,e){this.FSMVarsSent[t]=e,this.fsm.setFSMVariable(t,e)}triggerInputValidationEvent(){this.fsm.triggerEvent&&(this.dataSettings&&this.dataSettings.variablePrefix&&this.fsm.triggerEvent("ev_InputValidation_"+this.dataSettings.variablePrefix),this.fsm.triggerEvent("ev_InputValidation_ExtRes"))}getChangeState(t){return t.statusVarDef?t.statusVarDef.call(t):+t.getDefaultChangeState()}sendChangeState(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t.stage&&t.stage.isDemoAni)return;const n=null===e?this.getChangeState(t):e;if(void 0===t.oldChangeState||!i(n,t.oldChangeState)){if("object"==typeof n)for(let e in n)"object"==typeof t.oldChangeState&&n[e]===t.oldChangeState[e]||this.postVariable(e,n[e]);else t.FSMVariableName&&this.postVariable(`V_Status_${t.FSMVariableName}`,+n);t.oldChangeState=n}if(t.scoreDef){const e=t.scoreDef.call(t);if(void 0===t.oldScore||!i(e,t.oldScore))if("object"==typeof e)for(let n in e)"object"==typeof t.oldScore&&e[n]===t.oldScore[n]||this.postVariable(n,e[n]);else(t.FSMVariableName||t.scoreVariableName)&&void 0!==e&&this.postVariable(t.scoreVariableName||`V_Score_${t.FSMVariableName}`,e);t.oldScore=e}"function"==typeof this.addSendChangeState&&this.addSendChangeState()}declareVariables(){const t=[],e={string:"String",number:"Integer"};for(const n in this.FSMVarsSent){const r=this.FSMVarsSent[n],i={name:n,type:null===r?"Integer":e[typeof r],defaultValue:r,namedValues:[]};t.push(i)}return t}}function a(t){if("object"!=typeof t)return t;if(Array.isArray(t))return t.map((t=>a(t)));const e={};return Object.entries(t).forEach((t=>{let[n,r]=t;if("___"===n.substring(0,3)){const t=n.match(/^___arelvals_(.*)/);if(t)e[t[1]]=r.map((t=>Object.values(t).map((t=>a(t)))));else{const t=n.match(/^___alt[^_]*_(.*)/);t?void 0!==r&&(e[t[1]]=a(r)):"object"==typeof r&&Object.assign(e,a(r))}}else if(void 0!==r){const t=n.match(/^(.*?)___(.*)/);if(t){const n=a({[t[2]]:r});t[1]in e||(e[t[1]]={}),Object.assign(e[t[1]],n)}else e[n]=a(r)}})),e}function l(t){debugOut&&debugOut(`<span class="error">${t}</span>`),console.error(t)}class c{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(Object.assign(this,{outerDivStyles:{},divStyles:{}}),e),this.base=r,this.outerDiv=document.createElement("DIV"),this.outerDiv.classList.add("textareaInserts"),this.setStyles(this.outerDiv,this.outerDivStyles),this.div="string"==typeof t?document.querySelector(t):t,this.div.parentNode.replaceChild(this.outerDiv,this.div),this.setStyles(this.div,this.divStyles),this.outerDiv.appendChild(this.div),this.initData=this.div.innerHTML.trim()}ev_input(){}setStyles(t,e){for(const n in e)t.style[n]=e[n]}extract(){return""}getDefaultChangeState(){return this.div.innerHTML.trim()!==this.initData}getState(){return"{}"}setState(){}}class u extends c{constructor(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r={multiLine:!0,stripTags:!1,inputRegexp:null,maxlength:null,extractReplaces:[{from:/([^*])\*([^*])/g,to:"$1⋅$2"},{from:/\u2022|\u25cf/g,to:"⋅"}]};n(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),super(t,r,e),this.div.setAttribute("contenteditable","true"),this.div.addEventListener("keydown",this.ev_keydown.bind(this)),this.div.addEventListener("input",this.ev_input.bind(this)),!this.div.textContent.length&&this.multiLine&&(this.div.textContent="\n"),this.div.addEventListener("paste",(t=>t.preventDefault())),this.inputRegexp&&(this.inputRE=new RegExp(this.inputRegexp),this.saveValue()),this.div.addEventListener("focus",(()=>setTimeout((()=>this.base.postLog("textareaFocus",this.getTextPos())),0))),this.div.addEventListener("blur",(()=>this.base.postLog("textareaBlur"))),this.oldValue="",this.oldFocusElemIndex=null,this.initData=this.div.innerHTML.trim(),this.base.sendChangeState(this)}ev_keydown(t){let e=0;if(this.base){const e={which:t.which||t.keyCode};["key","code","shiftKey","altKey","ctrlKey","metaKey","isComposing","repeat"].forEach((n=>{t[n]&&(e[n]=t[n])})),this.base.postLog("keyDown",Object.assign(e,this.getTextPos()))}"Enter"===t.key||13==t.which||13==t.keyCode?(this.tabToNextInputField(t)||this.multiLine&&!this.pasteHtmlAtCaret("\n")||(t.preventDefault(),t.stopPropagation()),e=1):"Tab"===t.key||9==t.which||9==t.keyCode?(this.tabToNextInputField(t)||this.pasteHtmlAtCaret("&#09;")&&(t.preventDefault(),t.stopPropagation()),e=1):"Backspace"===t.key||8==t.which||8==t.keyCode?(this.delIfDiv(-1,t),e=1):"Delete"!==t.key&&46!=(t.which||t.keyCode)||(this.delIfDiv(1,t),e=1),this.base&&e>0&&this.base.sendChangeState(this)}ev_input(t){let e=!1;const n=window.getSelection();if(t&&"deleteContentBackward"==t.inputType&&this.delPosElement){let t=null,r=n.focusNode;if(this.delPosText)for(;!t&&r&&(!r.classList||!r.classList.contains("textareaInserts"));)r.classList&&r.classList.contains("inserted")&&(t=r),r=r.parentNode;if(t){if(n.getRangeAt&&n.rangeCount){const e=n.getRangeAt(0).cloneRange();e.setStartBefore(t),e.collapse(!0),n.removeAllRanges(),n.addRange(e)}this.div.replaceChild(this.delPosText,this.delPosElement),this.div.normalize()}else this.delPosElement.remove();this.delPosElement=null,this.delPosText=null,e=this.inputRE||!this.multiLine}else{if(n&&n.isCollapsed&&n.focusNode&&n.focusNode.parentNode==this.div&&0===n.focusOffset&&n.focusNode.previousSibling&&n.focusNode.previousSibling.classList&&n.focusNode.previousSibling.classList.contains("inserted")?(this.delPosText=n.focusNode.cloneNode(!0),this.delPosElement=n.focusNode.previousSibling):(this.delPosElement=null,this.delPosText=null),this.multiLine){const t=this.div.childNodes.length>0?this.div.childNodes[this.div.childNodes.length-1]:null;if(t&&t.nodeType==Node.TEXT_NODE&&!t.textContent.endsWith("\n")){const e=n&&n.focusNode==t?n.focusOffset:null;t.textContent=t.textContent+"\n",null!==e&&this.setCurPos(t,e)}}else this.div.textContent.match(/[\n\r]/)?this.restoreValue():e=!0;if(this.stripTags)this.div.innerHTML.match(/<[^>]*>/)&&(this.div.innerHTML=this.div.innerHTML.replace(/<[^>]*>/g,""));else{let t=this.div.childNodes[0];for(;t;){const e=t;if(t=t.nextSibling,"DIV"==e.tagName&&e.classList&&!e.classList.contains("inserted")){const t=e.textContent;if(t.length){const n=document.createTextNode("");n.textContent=t,this.div.replaceChild(n,e),this.div.normalize()}else e.remove()}}"<br>"===this.div.innerHTML.trim()&&(this.div.innerHTML="",this.div.textContent="\n")}(this.inputRE||this.maxlength)&&(this.inputRE&&!this.div.innerHTML.match(this.inputRE)||this.maxlength&&this.div.innerHTML.length>this.maxlength?(this.restoreValue(),this.base&&(this.base.postLog("inputRevert",{toText:this.div.innerHTML,extract:this.extract()}),this.base.triggerInputValidationEvent())):e=!0)}e&&this.saveValue(),(e||!this.inputRE||this.multiLine)&&this.base.postLog("newValue",{extract:this.extract()}),this.base&&this.base.sendChangeState(this)}pasteHtmlAtCaret(t,e,n){const r=window.getSelection();if(!r||!r.focusNode||!this.div.contains(r.focusNode))return!1;if(r.getRangeAt&&r.rangeCount){let a,l=r.getRangeAt(0);l.deleteContents(),a=e?`${r.focusOffset&&" "==r.focusNode.textContent[r.focusOffset-1]?"":" "}${t} `:t;const c=document.createElement("div");c.innerHTML=a;for(var i,o,s=document.createDocumentFragment();i=c.firstChild;)i.classList&&i.classList.add("inserted"),o=s.appendChild(i);const u=s.querySelector(".startCursorPos");if(l.insertNode(s),o&&(l=l.cloneRange(),u?l.setStart(u,0):l.setStartAfter(o),l.collapse(!0),r.removeAllRanges(),r.addRange(l)),this.normalize(),n&&this.base){const t={text:a,name:n,extract:this.extract()};this.base.postLog("insertButtonPressed",Object.assign(t,this.getTextPos()))}}return!0}delIfDiv(t,e){const n=window.getSelection();if(n&&n.isCollapsed){const r=n.focusNode;if(r&&(t>0&&n.focusOffset==r.textContent.length||t<0&&(!n.focusOffset||r==this.div&&n.focusOffset<=this.div.childNodes.length))){const i=r==this.div?this.div.childNodes[n.focusOffset-1]:t<0?r.previousSibling:r.nextSibling;if(i&&"DIV"==i.tagName&&i.classList.contains("inserted")){const t=n.getRangeAt(0);return t&&(i.previousSibling?t.setStartAfter(i.previousSibling):i.nextSibling&&t.setStart(i.nextSibling,0),t.collapse(!0),n.removeAllRanges(),n.addRange(t)),i.remove(),this.div.normalize(),e.preventDefault(),e.stopPropagation(),!0}}}return!1}tabToNextInputField(t){const e=window.getSelection();if(e&&e.isCollapsed&&e.focusNode&&e.getRangeAt&&e.rangeCount){let n;for(n=e.focusNode;n&&!n.classList;)n=n.parentNode;if(n&&n.classList.contains("inputField")){for(;n&&!n.nextSibling&&n!=this.div;)n=n.parentNode;if(n&&n!=this.div)return n=n.nextSibling,this.setCurPos(n,n.nodeType==Node.TEXT_NODE&&n.textContent.startsWith(" ")?1:0),t.preventDefault(),t.stopPropagation(),!0}}return!1}saveValue(){this.oldValue=this.div.innerHTML;const t=window.getSelection();if(t&&t.focusNode){const e=Array.from(this.div.childNodes);this.oldFocusElemIndex=e.findIndex((e=>e===t.focusNode)),this.oldFocusOffset=t.focusOffset}else this.oldFocusElemIndex=null}restoreValue(){if(null!==this.oldValue){this.div.innerHTML=this.oldValue;const t=window.getSelection();t&&(t.removeAllRanges(),null!==this.oldFocusElemIndex&&this.oldFocusElemIndex>-1&&this.setCurPos(this.div.childNodes[this.oldFocusElemIndex],this.oldFocusOffset))}}setCurPos(t,e){const n=window.getSelection();if(n){const r=document.createRange();r.setStart(t,e),r.collapse(!0),n.removeAllRanges(),n.addRange(r)}}normalize(){let t,e,n=null;const r=window.getSelection();if(r&&r.getRangeAt&&r.rangeCount){let i=r.focusNode;if(i&&i.nodeType==Node.TEXT_NODE&&(i.previousSibling&&i.previousSibling.nodeType==Node.TEXT_NODE||i.nextSibling&&i.nextSibling.nodeType==Node.TEXT_NODE)){for(n=r.focusOffset,e=i.parentElement;i.previousSibling&&i.previousSibling.nodeType==Node.TEXT_NODE;)i=i.previousSibling,n+=i.textContent.length;t=i.previousSibling}}if(this.div.normalize(),null!==n){const i=t?t.nextSibling:e.firstChild,o=document.createRange();o.setStart(i,n),o.collapse(!0),r.removeAllRanges(),r.addRange(o)}}getTextPos(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t&&(t=window.getSelection()),t&&t.focusNode){let e=t.focusOffset,n=t.focusNode;for(;(n=n.previousSibling||n.parentNode)&&n!=this.div&&n;)n.textContent&&(e+=n.textContent.length);const r={textPos:e};for(n=t.focusNode;n&&n!=this.div&&!n.classList;)n=n.parentNode;return n.classList&&n.classList.contains("frac")&&(n.classList.contains("top")&&(r.class="frac top"),n.classList.contains("bottom")&&(r.class="frac bottom")),r}return{}}extract(){let t=this.div.innerHTML;return this.extractReplaces.forEach((e=>{t=t.replace(e.from,e.to)})),t.trim()}getState(){return JSON.stringify(this.div.innerHTML)}setState(t){try{this.div.innerHTML=JSON.parse(t)}catch(t){console.error(t)}var e;(e=this).stage&&e.stage.isDemoAni&&e.stage.isDemoAni.endAni&&e.stage.isDemoAni.endAni(!1),e.base&&e.base.sendChangeState(e)}scoreDef(){return this.scoreVariableName||this.FSMVariableName?{[this.scoreVariableName||`V_Input_${this.FSMVariableName}`]:this.extract()}:{}}}class d extends u{constructor(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r={toolbar:[],toolbarDirection:"column",toolbarContainerStyles:{},toolbarCellStyles:{},toolbarCellSpanStyles:{}};n(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),super(t,r,e),this.toolbarContainer=document.createElement("DIV"),this.toolbarContainer.classList.add("toolbar",`ti${this.toolbarDirection}`,"disabled"),this.toolbarContainerStyles.left||(this.toolbarContainerStyles.left=this.divStyles.width),this.toolbarContainerStyles.top||(this.toolbarContainerStyles.top="0px"),this.setStyles(this.toolbarContainer,this.toolbarContainerStyles),this.toolbar.forEach(((t,e)=>{const n=document.createElement("DIV");this.setStyles(n,this.toolbarCellStyles),["mousedown","touchstart"].forEach((t=>n.addEventListener(t,function(t){document.activeElement&&!this.toolbarContainer.classList.contains("disabled")&&this.div.contains(document.activeElement)&&this.insert(e,t)}.bind(this))));const r=document.createElement("SPAN");this.setStyles(r,this.toolbarCellSpanStyles),n.appendChild(r),r.innerHTML=t.display,this.toolbarContainer.appendChild(n),t.extractReplace&&t.extractReplace.from&&t.extractReplace.to&&this.extractReplaces.push(t.extractReplace)})),this.outerDiv.appendChild(this.toolbarContainer),this.div.addEventListener("focus",(()=>this.toolbarContainer.classList.remove("disabled")),{capture:!0}),this.div.addEventListener("blur",(()=>this.toolbarContainer.classList.add("disabled")),{capture:!0})}insert(t,e){if(this.toolbar[t].dontInsertRecursive){const t=window.getSelection();if(t&&t.focusNode){let e=t.focusNode;for(;e&&(!e.classList||!e.classList.contains("textareaInserts")&&!e.classList.contains("inserted"));)e=e.parentNode;if(e.classList&&e.classList.contains("inserted"))return}}this.pasteHtmlAtCaret(this.toolbar[t].insert||this.toolbar[t].display,!this.toolbar[t].noExtraSpaces,this.toolbar[t].logName)&&(this.ev_input(),e.preventDefault(),e.stopPropagation()),this.base&&this.base.sendChangeState(this)}}const h=[{display:"&plus;",logName:"plus"},{display:"&minus;",logName:"minus"},{display:"&sdot;",logName:"dot"},{display:"&ratio;",logName:"ratio"},{display:"&equals;",logName:"equals"}],f=[{display:'<div class="frac"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MC4wMDIiIGhlaWdodD0iMTA2Ljg5MyIgdmlld0JveD0iMCAwIDIzLjgxMyAyOC4yODIiIHhtbG5zOnY9Imh0dHBzOi8vdmVjdGEuaW8vbmFubyI+PHBhdGggZD0iTTUuOTUzLjM4M2gxMS45MDZ2MTAuNTgzSDUuOTUzem0wIDE2LjkzM2gxMS45MDZ2MTAuNTgzSDUuOTUzeiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii43NjUiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNMCAxNC4xNDFoMjMuODEyIiBmaWxsPSIjZDg2MjZjIiBmaWxsLW9wYWNpdHk9Ii4yNjIiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxLjA2NSIvPjwvc3ZnPg=="></div>',insert:'<div contenteditable="false" class="frac"><span contenteditable="true" class="frac top startCursorPos inputField"></span><span contenteditable="true" class="frac bottom inputField"></span></div>',dontInsertRecursive:!0,logName:"fraction",extractReplace:{from:/<div[^>]*class="frac[^>]*>\s*<span[^>]*class="frac top[^>]*>(.*?)<\/span>\s*<span[^>]*class="frac bottom[^>]*>(.*?)<\/span>\s*<\/div>/g,to:"($1)/($2)"}}],p=h.concat(f);[].concat(f).concat(p),p.concat([{display:"%",logName:"percent"}]);class g extends d{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=Object.assign({},{toolbarCellWidth:22,inputHeight:22,toolbarDirection:"row",multiLine:!1,stripTags:!0},e),i={position:"absolute",left:"0px",top:`${r.toolbarCellWidth}px`,height:`${r.inputHeight}px`,"vertical-align":"middle",overflow:"hidden"};r.divStyles=Object.assign(i,r.divStyles||{});const o=r.divStyles.width.match("([0-9]+)px"),s={left:(o?o[1]:100)-r.toolbar.length*r.toolbarCellWidth+"px",top:"0px"};r.toolbarContainerStyles=Object.assign(s,r.toolbarContainerStyles||{});const a={width:`${r.toolbarCellWidth}px`,height:`${r.toolbarCellWidth}px`};r.toolbarCellStyles=Object.assign(a,r.toolbarCellStyles||{}),super(t,r,n)}getOpRE(t,e,n,r){const i=`(?:${e.map((e=>`(?:${e.map((t=>t.toString().replace(/[.,]/,"[.,]"))).join(`\\s*(?:${t})\\s*`)})`)).join("|")})`;return null!=n?(n=n.toString().replace(/[.,]/,"[.,]"),new RegExp(`^(?:(?:(?:${n}\\s*)?(=|=)\\s*)${i}|${i}(?:\\s*(=|=)(?:\\s*${n})?)${r?"?":""})$`)):new RegExp(null===n?`^${i}$`:`(?:^|\\s|[^0-9,.])${i}(?:\\s|[^0-9,.]|$)`)}isOpRE(t,e,n,r){return this.div.innerHTML.trim().match(this.getOpRE(t,e,n,r))}isSumRE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.isOpRE("\\+",t,e,n)}isDiffRE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.isOpRE("-|−",t,e,n)}isMultRE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.isOpRE("\\*|⋅|•|●",t,e,n)}isDivRE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.isOpRE("[/:]|∶",t,e,n)}perm(t){let e=[];for(let n=0;n<t.length;n+=1){let r=this.perm(t.slice(0,n).concat(t.slice(n+1)));if(r.length)for(let i=0;i<r.length;i+=1)e.push([t[n]].concat(r[i]));else e.push([t[n]])}return e}combinations(t){const e=[],n=Math.pow(2,t.length);for(let r=0;r<n;r++){let n=[];for(let e=0;e<t.length;e++)r&Math.pow(2,e)&&n.push(t[e]);n.length&&e.push(n)}return e}allCombPerm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=this.combinations(t).filter((t=>t.length>=e));let r=[];return n.forEach((t=>r=r.concat(this.perm(t)))),r}}class v extends g{constructor(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s="string"==typeof n?document.querySelector(n):n;r.divStyles={width:`${r.width>0?r.width:s.offsetWidth+r.width}px`},r.toolbar=h,r.inputRegexp="^([0-9]*(?:[,.][0-9]*)?|[ +*/:=-]|−|⋅|•|●|∶|=)*$",super(n,r,i),r.dataSettings&&r.dataSettings.scoringPattern&&this.parseScoringPattern(r.dataSettings.scoringPattern,r.dataSettings.variablePrefix),function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!r)return n.parseScoringVals=()=>{},void(n.computeScoringVals=()=>{});const o=new r;Object.assign(i,{isNumUnit:e,isBetween:t,match:(t,e)=>t.match(e),strEqual:(t,e)=>t.toLowerCase==e.toLowerCase});for(const t in i)o.functions[t]=i[t];n.parseScoringVals=function(t){if(t.dataSettings&&t.dataSettings.scoringVals&&this.scoreDef){const e=t.dataSettings.scoringVals,n=this.scoreDef();if("object"==typeof n){const t=Object.keys(n);t.length>0&&e.forEach((e=>{let n=e.condition;if(n){let r=n;const i=n.matchAll(/\$\{([^}]*)}/g);for(const e of i)if(0==e[1].length)l("Variablen-Name '${}' in Scoring nicht zulässig");else{const n=new RegExp(e[1],"i"),i=t.filter((t=>t.match(n)));i.length>1?(l(`Variablen-Name '\${${e[1]}}' in Scoring ist nicht eindeutig`),r=""):0==i.length?(l(`Variablen-Name '\${${e[1]}}' in Scoring unbekannt`),r=""):r=r.replace(e[0],i[0])}if(r){"scoringVals"in this||(this.scoringVals={});try{this.scoringVals[e.val]=o.parse(r)}catch(t){l(`Syntax-Fehler in Scoring-Condition: ${n}`)}}}}))}}},n.computeScoringVals=function(t){if(this.scoringVals){let e=null;const n=Object.entries(this.scoringVals);for(let r=0;null==e&&r<n.length;r++){const[i,o]=n[r];try{o.evaluate(t)&&(e=i)}catch(t){l("Error in scoring-condition")}}const r=Number(e);t[`S_${this.dataSettings.variablePrefix}`]=null!==e&&NaN!==r?r:e}}}(this,o.Parser),this.parseScoringVals(r)}parseScoringPattern(t,e){this.scoringPattern={};const n=new RegExp("(\\d+(?:[,.]\\d+)?) *((?:([\\-+*\\/]) *(?:\\d+(?:[,.]\\d+)?) *)+)(\\[ *= *(\\d+(?:[,.]\\d+)?) *\\] *|= *(\\d+(?:[,.]\\d+)?) *)?"),r=new RegExp("(\\d+(?:[,.]\\d+)?)","g");t.forEach((t=>{const i=t.pattern.trim().match(n);if(i){const n={"+":"\\+","-":"-|−","*":"\\*|⋅|•|●","/":"[/:]|∶"}[i[3]],o=[i[1]];for(const t of i[2].matchAll(r))o.push(t[0]);let s,a;i[4]?(s=i[5]||i[6],a=void 0!==i[5]):(s=t.add?void 0:null,a=!1);const l=this.getOpRE(n,t.perm?this.perm(o):[o],s,a);this.scoringPattern[`S_${e}_${t.name}`]=l}}))}scoreDef(){const t={[`V_${this.dataSettings.variablePrefix}_Input`]:this.extract()};if(this.scoringPattern){const e=this.div.innerHTML.trim();Object.entries(this.scoringPattern).forEach((n=>{let[r,i]=n;return t[r]=e.match(i)?1:0}))}return this.computeScoringVals&&this.computeScoringVals(t),t}}const b="extres_config.json",m="extres_config.schema.json";function y(){fetch(b).then((t=>{if(!t.ok)throw new Error(`ExtRes: Error reading '${b}'!`);return t.json()})).then((t=>function(t){if("string"==typeof t)try{t=JSON.parse(t,!0)}catch(t){return void console.error(`Format-Error in JSON file '${b}'`)}const e=a(t),n=new s;e.dataSettings&&(n.dataSettings=e.dataSettings),new Promise((t=>{e.dataSettings&&e.dataSettings.scoringVals&&e.dataSettings.scoringVals.length>0?r.e(35).then(r.bind(r,6830)).then((e=>t({Parser:e.Parser}))):t({})})).then((r=>{const i=new v("#container",e,n,r);!function(t,e){if(!t.statusVarDef&&e.dataSettings&&e.dataSettings.variablePrefix){const n=`S_${e.dataSettings.variablePrefix}_Status`;t.statusVarDef=function(){return{[n]:+this.getDefaultChangeState()}}}}(i,t),i.getState&&(window.getState=i.getState.bind(i)),i.setState&&(window.setState=i.setState.bind(i))}))}(t))).catch((t=>console.error(t)))}document.addEventListener("DOMContentLoaded",(function(){!function(){const t=()=>{const t=window.location.pathname.match(/\/([^/]+)\/[^/]*$/);return t?t[1]:"."};window.addEventListener("message",(e=>{try{const{callId:n}=JSON.parse(e.data);void 0!==n&&n.includes("importJsonData")&&fetch(m).then((t=>{if(!t.ok)throw new Error(`ExtRes: Error reading '${m}'!`);return t.json()})).then((e=>{const r={jsonSchema:e,configFileName:t()+"/"+b,callId:n};window.parent.postMessage(JSON.stringify(r),"*")})).catch((t=>console.error(t)))}catch(t){}}),!1)}(),y()}))})()})();