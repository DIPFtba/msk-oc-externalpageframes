(()=>{"use strict";var t,e={1052:(t,e,n)=>{var i=n(688),r=n(3397),o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not a function")}},586:(t,e,n)=>{var i=n(2032),r=n(8536),o=n(2131).f,s=i("unscopables"),a=Array.prototype;void 0===a[s]&&o(a,s,{configurable:!0,value:r(null)}),t.exports=function(t){a[s][t]=!0}},9175:(t,e,n)=>{var i=n(5309),r=String,o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not an object")}},1138:(t,e,n)=>{var i=n(6854),r=n(7352),o=n(8344),s=function(t){return function(e,n,s){var a=i(e),l=o(a);if(0===l)return!t&&-1;var c,u=r(s,l);if(t&&n!=n){for(;l>u;)if((c=a[u++])!=c)return!0}else for(;l>u;u++)if((t||u in a)&&a[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},6207:(t,e,n)=>{var i=n(9924),r=n(256),o=TypeError,s=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(r(t)&&!s(t,"length").writable)throw new o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},2177:(t,e,n)=>{var i=n(9668),r=i({}.toString),o=i("".slice);t.exports=function(t){return o(r(t),8,-1)}},3891:(t,e,n)=>{var i=n(4678),r=n(990),o=n(7537),s=n(2131);t.exports=function(t,e,n){for(var a=r(e),l=s.f,c=o.f,u=0;u<a.length;u++){var d=a[u];i(t,d)||n&&i(n,d)||l(t,d,c(e,d))}}},2385:(t,e,n)=>{var i=n(9924),r=n(2131),o=n(7781);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},7781:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2470:(t,e,n)=>{var i=n(688),r=n(2131),o=n(1135),s=n(1604);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(i(n)&&o(n,c,a),a.global)l?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},1604:(t,e,n)=>{var i=n(2150),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},9924:(t,e,n)=>{var i=n(4694);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},1442:(t,e,n)=>{var i=n(2150),r=n(5309),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},3433:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},1370:t=>{t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7067:(t,e,n)=>{var i,r,o=n(2150),s=n(1370),a=o.process,l=o.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(r=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=+i[1]),t.exports=r},2367:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},5532:(t,e,n)=>{var i=n(2150),r=n(7537).f,o=n(2385),s=n(2470),a=n(1604),l=n(3891),c=n(1633);t.exports=function(t,e){var n,u,d,h,f,p=t.target,g=t.global,v=t.stat;if(n=g?i:v?i[p]||a(p,{}):i[p]&&i[p].prototype)for(u in e){if(h=e[u],d=t.dontCallGetSet?(f=r(n,u))&&f.value:n[u],!c(g?u:p+(v?".":"#")+u,t.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(t.sham||d&&d.sham)&&o(h,"sham",!0),s(n,u,h,t)}}},4694:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},6398:(t,e,n)=>{var i=n(4694);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},8724:(t,e,n)=>{var i=n(6398),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},453:(t,e,n)=>{var i=n(9924),r=n(4678),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),l=a&&"something"===function(){}.name,c=a&&(!i||i&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},9668:(t,e,n)=>{var i=n(6398),r=Function.prototype,o=r.call,s=i&&r.bind.bind(o,o);t.exports=i?s:function(t){return function(){return o.apply(t,arguments)}}},2160:(t,e,n)=>{var i=n(2150),r=n(688),o=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t]):i[t]&&i[t][e]}},5383:(t,e,n)=>{var i=n(1052),r=n(5268);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},2150:function(t,e,n){var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4678:(t,e,n)=>{var i=n(9668),r=n(298),o=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},7390:t=>{t.exports={}},8651:(t,e,n)=>{var i=n(2160);t.exports=i("document","documentElement")},7913:(t,e,n)=>{var i=n(9924),r=n(4694),o=n(1442);t.exports=!i&&!r((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},4347:(t,e,n)=>{var i=n(9668),r=n(4694),o=n(2177),s=Object,a=i("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},1881:(t,e,n)=>{var i=n(9668),r=n(688),o=n(6762),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},7804:(t,e,n)=>{var i,r,o,s=n(4724),a=n(2150),l=n(5309),c=n(2385),u=n(4678),d=n(6762),h=n(1962),f=n(7390),p="Object already initialized",g=a.TypeError,v=a.WeakMap;if(s||d.state){var b=d.state||(d.state=new v);b.get=b.get,b.has=b.has,b.set=b.set,i=function(t,e){if(b.has(t))throw new g(p);return e.facade=t,b.set(t,e),e},r=function(t){return b.get(t)||{}},o=function(t){return b.has(t)}}else{var m=h("state");f[m]=!0,i=function(t,e){if(u(t,m))throw new g(p);return e.facade=t,c(t,m,e),e},r=function(t){return u(t,m)?t[m]:{}},o=function(t){return u(t,m)}}t.exports={set:i,get:r,has:o,enforce:function(t){return o(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!l(e)||(n=r(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return n}}}},256:(t,e,n)=>{var i=n(2177);t.exports=Array.isArray||function(t){return"Array"===i(t)}},688:t=>{var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},1633:(t,e,n)=>{var i=n(4694),r=n(688),o=/#|\.prototype\./,s=function(t,e){var n=l[a(t)];return n===u||n!==c&&(r(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},5268:t=>{t.exports=function(t){return null==t}},5309:(t,e,n)=>{var i=n(688);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},6555:t=>{t.exports=!1},7935:(t,e,n)=>{var i=n(2160),r=n(688),o=n(6148),s=n(4866),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&o(e.prototype,a(t))}},8344:(t,e,n)=>{var i=n(7331);t.exports=function(t){return i(t.length)}},1135:(t,e,n)=>{var i=n(9668),r=n(4694),o=n(688),s=n(4678),a=n(9924),l=n(453).CONFIGURABLE,c=n(1881),u=n(7804),d=u.enforce,h=u.get,f=String,p=Object.defineProperty,g=i("".slice),v=i("".replace),b=i([].join),m=a&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),y=String(String).split("String"),S=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+v(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),m&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var i=d(t);return s(i,"source")||(i.source=b(y,"string"==typeof e?e:"")),t};Function.prototype.toString=S((function(){return o(this)&&h(this).source||c(this)}),"toString")},1787:t=>{var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},8536:(t,e,n)=>{var i,r=n(9175),o=n(227),s=n(2367),a=n(7390),l=n(8651),c=n(1442),u=n(1962),d="prototype",h="script",f=u("IE_PROTO"),p=function(){},g=function(t){return"<"+h+">"+t+"</"+h+">"},v=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;b="undefined"!=typeof document?document.domain&&i?v(i):(e=c("iframe"),n="java"+h+":",e.style.display="none",l.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(g("document.F=Object")),t.close(),t.F):v(i);for(var r=s.length;r--;)delete b[d][s[r]];return b()};a[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p[d]=r(t),n=new p,p[d]=null,n[f]=t):n=b(),void 0===e?n:o.f(n,e)}},227:(t,e,n)=>{var i=n(9924),r=n(2666),o=n(2131),s=n(9175),a=n(6854),l=n(1728);e.f=i&&!r?Object.defineProperties:function(t,e){s(t);for(var n,i=a(e),r=l(e),c=r.length,u=0;c>u;)o.f(t,n=r[u++],i[n]);return t}},2131:(t,e,n)=>{var i=n(9924),r=n(7913),o=n(2666),s=n(9175),a=n(2358),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",f="writable";e.f=i?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var i=u(t,e);i&&i[f]&&(t[e]=n.value,n={configurable:h in n?n[h]:i[h],enumerable:d in n?n[d]:i[d],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),r)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},7537:(t,e,n)=>{var i=n(9924),r=n(8724),o=n(8208),s=n(7781),a=n(6854),l=n(2358),c=n(4678),u=n(7913),d=Object.getOwnPropertyDescriptor;e.f=i?d:function(t,e){if(t=a(t),e=l(e),u)try{return d(t,e)}catch(t){}if(c(t,e))return s(!r(o.f,t,e),t[e])}},6217:(t,e,n)=>{var i=n(1528),r=n(2367).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},5168:(t,e)=>{e.f=Object.getOwnPropertySymbols},6148:(t,e,n)=>{var i=n(9668);t.exports=i({}.isPrototypeOf)},1528:(t,e,n)=>{var i=n(9668),r=n(4678),o=n(6854),s=n(1138).indexOf,a=n(7390),l=i([].push);t.exports=function(t,e){var n,i=o(t),c=0,u=[];for(n in i)!r(a,n)&&r(i,n)&&l(u,n);for(;e.length>c;)r(i,n=e[c++])&&(~s(u,n)||l(u,n));return u}},1728:(t,e,n)=>{var i=n(1528),r=n(2367);t.exports=Object.keys||function(t){return i(t,r)}},8208:(t,e)=>{var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},110:(t,e,n)=>{var i=n(8724),r=n(688),o=n(5309),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!o(a=i(n,t)))return a;if(r(n=t.valueOf)&&!o(a=i(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!o(a=i(n,t)))return a;throw new s("Can't convert object to primitive value")}},990:(t,e,n)=>{var i=n(2160),r=n(9668),o=n(6217),s=n(5168),a=n(9175),l=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?l(e,n(t)):e}},1166:(t,e,n)=>{var i=n(5268),r=TypeError;t.exports=function(t){if(i(t))throw new r("Can't call method on "+t);return t}},1962:(t,e,n)=>{var i=n(2645),r=n(5736),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},6762:(t,e,n)=>{var i=n(6555),r=n(2150),o=n(1604),s="__core-js_shared__",a=t.exports=r[s]||o(s,{});(a.versions||(a.versions=[])).push({version:"3.36.1",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},2645:(t,e,n)=>{var i=n(6762);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},4112:(t,e,n)=>{var i=n(7067),r=n(4694),o=n(2150).String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},7352:(t,e,n)=>{var i=n(1680),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},6854:(t,e,n)=>{var i=n(4347),r=n(1166);t.exports=function(t){return i(r(t))}},1680:(t,e,n)=>{var i=n(1787);t.exports=function(t){var e=+t;return e!=e||0===e?0:i(e)}},7331:(t,e,n)=>{var i=n(1680),r=Math.min;t.exports=function(t){var e=i(t);return e>0?r(e,9007199254740991):0}},298:(t,e,n)=>{var i=n(1166),r=Object;t.exports=function(t){return r(i(t))}},1272:(t,e,n)=>{var i=n(8724),r=n(5309),o=n(7935),s=n(5383),a=n(110),l=n(2032),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var n,l=s(t,u);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!r(n)||o(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},2358:(t,e,n)=>{var i=n(1272),r=n(7935);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},3397:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},5736:(t,e,n)=>{var i=n(9668),r=0,o=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+o,36)}},4866:(t,e,n)=>{var i=n(4112);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2666:(t,e,n)=>{var i=n(9924),r=n(4694);t.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4724:(t,e,n)=>{var i=n(2150),r=n(688),o=i.WeakMap;t.exports=r(o)&&/native code/.test(String(o))},2032:(t,e,n)=>{var i=n(2150),r=n(2645),o=n(4678),s=n(5736),a=n(4112),l=n(4866),c=i.Symbol,u=r("wks"),d=l?c.for||c:c&&c.withoutSetter||s;t.exports=function(t){return o(u,t)||(u[t]=a&&o(c,t)?c[t]:d("Symbol."+t)),u[t]}},452:(t,e,n)=>{var i=n(5532),r=n(1138).includes,o=n(4694),s=n(586);i({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},4936:(t,e,n)=>{var i=n(5532),r=n(298),o=n(8344),s=n(6207),a=n(3433);i({target:"Array",proto:!0,arity:1,forced:n(4694)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=r(this),n=o(e),i=arguments.length;a(n+i);for(var l=0;l<i;l++)e[n]=arguments[l],n++;return s(e,n),n}})}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var o=n[t]={exports:{}};return e[t].call(o.exports,o,o.exports,i),o.exports}i.m=e,i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,n)=>(i.f[n](t,e),e)),[])),i.u=t=>"sce.js",i.miniCssF=t=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},i.l=(e,n,r,o)=>{if(t[e])t[e].push(n);else{var s,a;if(void 0!==r)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==e){s=u;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=e),t[e]=[n];var d=(n,i)=>{s.onerror=s.onload=null,clearTimeout(h);var r=t[e];if(delete t[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((t=>t(i))),n)return n(i)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),a&&document.head.appendChild(s)}},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t={179:0};i.f.j=(e,n)=>{var r=i.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,i)=>r=t[e]=[n,i]));n.push(r[2]=o);var s=i.p+i.u(e),a=new Error;i.l(s,(n=>{if(i.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}}),"chunk-"+e,e)}};var e=(e,n)=>{var r,o,[s,a,l]=n,c=0;if(s.some((e=>0!==t[e]))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);l&&l(i)}for(e&&e(n);c<s.length;c++)o=s[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),(()=>{function t(t,e,n){return t>=Math.min(e,n)&&t<=Math.max(e,n)}function e(t,e,n,i,r){const o=`0*${e}(?:[,.]0*)?`,s=new RegExp(`^(?:${i?`${o}(?: *${n})?|(?:${n} *)?${o}`:`${o} *${n}|${n} *${o}`})${r?"?":""}$`);return t.trim().match(s)}function n(t,e){const i=t=>t&&"object"==typeof t;return i(t)&&i(e)?(Object.keys(e).forEach((r=>{const o=t[r],s=e[r];Array.isArray(s)?t[r]=s:i(o)&&i(s)?t[r]=n(Object.assign({},o),s):t[r]=s})),t):e}function r(t,e){if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;if(t.constructor!==e.constructor)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(t.length!=e.length)return!1;const n=Array.from(e);return!!t.every((t=>n.some(((e,i)=>!!r(t,e)&&(n.splice(i,1),!0)))))&&0===n.length}for(var n in t)if(t.hasOwnProperty(n)){if(!e.hasOwnProperty(n))return!1;if(t[n]!==e[n]){if("object"!=typeof t[n])return!1;if(!r(t[n],e[n]))return!1}}for(n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}i(452),i(4936);class o{constructor(){this.indexPath=this.getQueryVariable("indexPath"),this.userDefIdPath=this.getQueryVariable("userDefIdPath"),this.traceCount=0}setFSMVariable(t,e){"object"==typeof e&&Array.isArray(e)&&(e=e.join(",")),this.postMessageWithPathsAndTraceCount({setVariable:{variableName:t,newValue:e}})}postLogEvent(t){this.postMessageWithPathsAndTraceCount({traceMessage:t})}triggerEvent(t){this.postMessageWithPathsAndTraceCount({microfinEvent:t})}postMessageWithPathsAndTraceCount(t){try{t.indexPath=this.indexPath,t.userDefIdPath=this.userDefIdPath,t.traceCount=this.traceCount++,window.parent.postMessage(JSON.stringify(t),"*")}catch(t){console.error(t)}}getQueryVariable(t){return new URL(window.location.href).searchParams.get(t)}startListeningToVariableDeclarationRequests(t){window.addEventListener("message",(e=>{try{const{callId:n}=JSON.parse(e.data);if(void 0!==n&&n.includes("importVariables")){const e={initialVariables:t(),callId:n};window.parent.postMessage(JSON.stringify(e),"*")}}catch(t){}}),!1)}debugOut(t){}}class s{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.assign(this,{container:null,addSendChangeState:null},t),this.fsm||(this.fsm=new o,this.fsm.startListeningToVariableDeclarationRequests(this.declareVariables.bind(this))),t.container){this.width||(this.width=window.innerWidth),this.height||(this.height=window.innerHeight),this.stage=new Konva.Stage({container:this.container,width:this.width,height:this.height});const t="BW_IB_EXTRES_STAGES";t in window||(window[t]=[]),window[t].push(this.stage)}document.addEventListener("contextmenu",(t=>t.preventDefault())),this.FSMVarsSent={}}postLog(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.stage&&this.stage.isDemoAni||this.fsm.postLogEvent(Object.assign({},e,{event:t}))}postVariable(t,e){this.FSMVarsSent[t]=e,this.fsm.setFSMVariable(t,e)}triggerInputValidationEvent(){this.fsm.triggerEvent&&(this.dataSettings&&this.dataSettings.variablePrefix&&this.fsm.triggerEvent("ev_InputValidation_"+this.dataSettings.variablePrefix),this.fsm.triggerEvent("ev_InputValidation_ExtRes"))}getChangeState(t){return t.statusVarDef?t.statusVarDef.call(t):+t.getDefaultChangeState()}sendChangeState(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t.stage&&t.stage.isDemoAni)return;const n=null===e?this.getChangeState(t):e;if(void 0===t.oldChangeState||!r(n,t.oldChangeState)){if("object"==typeof n)for(let e in n)"object"==typeof t.oldChangeState&&n[e]===t.oldChangeState[e]||this.postVariable(e,n[e]);else t.FSMVariableName&&this.postVariable(`V_Status_${t.FSMVariableName}`,+n);t.oldChangeState=n}if(t.scoreDef){const e=t.scoreDef.call(t);if(void 0===t.oldScore||!r(e,t.oldScore))if("object"==typeof e)for(let n in e)"object"==typeof t.oldScore&&e[n]===t.oldScore[n]||this.postVariable(n,e[n]);else(t.FSMVariableName||t.scoreVariableName)&&void 0!==e&&this.postVariable(t.scoreVariableName||`V_Score_${t.FSMVariableName}`,e);t.oldScore=e}"function"==typeof this.addSendChangeState&&this.addSendChangeState()}declareVariables(){const t=[],e={string:"String",number:"Integer"};for(const n in this.FSMVarsSent){const i=this.FSMVarsSent[n],r={name:n,type:null===i?"Integer":e[typeof i],defaultValue:i,namedValues:[]};t.push(r)}return t}}function a(t){if("object"!=typeof t)return t;if(Array.isArray(t))return t.map((t=>a(t)));const e={};return Object.entries(t).forEach((t=>{let[n,i]=t;if("___"===n.substring(0,3)){const t=n.match(/^___arelvals_(.*)/);if(t)e[t[1]]=i.map((t=>Object.values(t).map((t=>a(t)))));else{const t=n.match(/^___alt[^_]*_(.*)/);t?void 0!==i&&(e[t[1]]=a(i)):"object"==typeof i&&Object.assign(e,a(i))}}else if(void 0!==i){const t=n.match(/^(.*?)___(.*)/);if(t){const n=a({[t[2]]:i});t[1]in e||(e[t[1]]={}),Object.assign(e[t[1]],n)}else e[n]=a(i)}})),e}function l(t){debugOut&&debugOut(`<span class="error">${t}</span>`),console.error(t)}class c{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(Object.assign(this,{outerDivStyles:{},divStyles:{}}),e),this.base=i,this.outerDiv=document.createElement("DIV"),this.outerDiv.classList.add("textareaInserts"),this.setStyles(this.outerDiv,this.outerDivStyles),this.div="string"==typeof t?document.querySelector(t):t,this.div.parentNode.replaceChild(this.outerDiv,this.div),this.setStyles(this.div,this.divStyles),this.outerDiv.appendChild(this.div),this.initData=this.div.innerHTML.trim()}ev_input(){}setStyles(t,e){for(const n in e)t.style[n]=e[n]}extract(){return""}getDefaultChangeState(){return this.div.innerHTML.trim()!==this.initData}getState(){return"{}"}setState(){}}class u extends c{constructor(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i={multiLine:!0,stripTags:!1,inputRegexp:null,maxlength:null,extractReplaces:[{from:/(?<!\*)\*(?!\*)/g,to:"⋅"},{from:/\u2022|\u25cf/g,to:"⋅"}]};n(i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),super(t,i,e),this.div.setAttribute("contenteditable","true"),this.div.addEventListener("keydown",this.ev_keydown.bind(this)),this.div.addEventListener("input",this.ev_input.bind(this)),!this.div.textContent.length&&this.multiLine&&(this.div.textContent="\n"),this.div.addEventListener("paste",(t=>t.preventDefault())),this.inputRegexp&&(this.inputRE=new RegExp(this.inputRegexp),this.saveValue()),this.div.addEventListener("focus",(()=>setTimeout((()=>this.base.postLog("textareaFocus",this.getTextPos())),0))),this.div.addEventListener("blur",(()=>this.base.postLog("textareaBlur"))),this.oldValue="",this.oldFocusElemIndex=null,this.initData=this.div.innerHTML.trim(),this.base.sendChangeState(this)}ev_keydown(t){let e=0;if(this.base){const e={which:t.which||t.keyCode};["key","code","shiftKey","altKey","ctrlKey","metaKey","isComposing","repeat"].forEach((n=>{t[n]&&(e[n]=t[n])})),this.base.postLog("keyDown",Object.assign(e,this.getTextPos()))}"Enter"===t.key||13==t.which||13==t.keyCode?(this.tabToNextInputField(t)||this.multiLine&&!this.pasteHtmlAtCaret("\n")||(t.preventDefault(),t.stopPropagation()),e=1):"Tab"===t.key||9==t.which||9==t.keyCode?(this.tabToNextInputField(t)||this.pasteHtmlAtCaret("&#09;")&&(t.preventDefault(),t.stopPropagation()),e=1):"Backspace"===t.key||8==t.which||8==t.keyCode?(this.delIfDiv(-1,t),e=1):"Delete"!==t.key&&46!=(t.which||t.keyCode)||(this.delIfDiv(1,t),e=1),this.base&&e>0&&this.base.sendChangeState(this)}ev_input(t){let e=!1;const n=window.getSelection();if(t&&"deleteContentBackward"==t.inputType&&this.delPosElement){let t=null,i=n.focusNode;if(this.delPosText)for(;!t&&i&&(!i.classList||!i.classList.contains("textareaInserts"));)i.classList&&i.classList.contains("inserted")&&(t=i),i=i.parentNode;if(t){if(n.getRangeAt&&n.rangeCount){const e=n.getRangeAt(0).cloneRange();e.setStartBefore(t),e.collapse(!0),n.removeAllRanges(),n.addRange(e)}this.div.replaceChild(this.delPosText,this.delPosElement),this.div.normalize()}else this.delPosElement.remove();this.delPosElement=null,this.delPosText=null,e=this.inputRE||!this.multiLine}else{if(n&&n.isCollapsed&&n.focusNode&&n.focusNode.parentNode==this.div&&0===n.focusOffset&&n.focusNode.previousSibling&&n.focusNode.previousSibling.classList&&n.focusNode.previousSibling.classList.contains("inserted")?(this.delPosText=n.focusNode.cloneNode(!0),this.delPosElement=n.focusNode.previousSibling):(this.delPosElement=null,this.delPosText=null),this.multiLine){const t=this.div.childNodes.length>0?this.div.childNodes[this.div.childNodes.length-1]:null;if(t&&t.nodeType==Node.TEXT_NODE&&!t.textContent.endsWith("\n")){const e=n&&n.focusNode==t?n.focusOffset:null;t.textContent=t.textContent+"\n",null!==e&&this.setCurPos(t,e)}}else this.div.textContent.match(/[\n\r]/)?this.restoreValue():e=!0;if(this.stripTags)this.div.innerHTML.match(/<[^>]*>/)&&(this.div.innerHTML=this.div.innerHTML.replace(/<[^>]*>/g,""));else{let t=this.div.childNodes[0];for(;t;){const e=t;if(t=t.nextSibling,"DIV"==e.tagName&&e.classList&&!e.classList.contains("inserted")){const t=e.textContent;if(t.length){const n=document.createTextNode("");n.textContent=t,this.div.replaceChild(n,e),this.div.normalize()}else e.remove()}}"<br>"===this.div.innerHTML.trim()&&(this.div.innerHTML="",this.div.textContent="\n")}(this.inputRE||this.maxlength)&&(this.inputRE&&!this.div.innerHTML.match(this.inputRE)||this.maxlength&&this.div.innerHTML.length>this.maxlength?(this.restoreValue(),this.base&&(this.base.postLog("inputRevert",{toText:this.div.innerHTML,extract:this.extract()}),this.base.triggerInputValidationEvent())):e=!0)}e&&this.saveValue(),(e||!this.inputRE||this.multiLine)&&this.base.postLog("newValue",{extract:this.extract()}),this.base&&this.base.sendChangeState(this)}pasteHtmlAtCaret(t,e,n){const i=window.getSelection();if(!i||!i.focusNode||!this.div.contains(i.focusNode))return!1;if(i.getRangeAt&&i.rangeCount){let a,l=i.getRangeAt(0);l.deleteContents(),a=e?`${i.focusOffset&&" "==i.focusNode.textContent[i.focusOffset-1]?"":" "}${t} `:t;const c=document.createElement("div");c.innerHTML=a;for(var r,o,s=document.createDocumentFragment();r=c.firstChild;)r.classList&&r.classList.add("inserted"),o=s.appendChild(r);const u=s.querySelector(".startCursorPos");if(l.insertNode(s),o&&(l=l.cloneRange(),u?l.setStart(u,0):l.setStartAfter(o),l.collapse(!0),i.removeAllRanges(),i.addRange(l)),this.normalize(),n&&this.base){const t={text:a,name:n,extract:this.extract()};this.base.postLog("insertButtonPressed",Object.assign(t,this.getTextPos()))}}return!0}delIfDiv(t,e){const n=window.getSelection();if(n&&n.isCollapsed){const i=n.focusNode;if(i&&(t>0&&n.focusOffset==i.textContent.length||t<0&&(!n.focusOffset||i==this.div&&n.focusOffset<=this.div.childNodes.length))){const r=i==this.div?this.div.childNodes[n.focusOffset-1]:t<0?i.previousSibling:i.nextSibling;if(r&&"DIV"==r.tagName&&r.classList.contains("inserted")){const t=n.getRangeAt(0);return t&&(r.previousSibling?t.setStartAfter(r.previousSibling):r.nextSibling&&t.setStart(r.nextSibling,0),t.collapse(!0),n.removeAllRanges(),n.addRange(t)),r.remove(),this.div.normalize(),e.preventDefault(),e.stopPropagation(),!0}}}return!1}tabToNextInputField(t){const e=window.getSelection();if(e&&e.isCollapsed&&e.focusNode&&e.getRangeAt&&e.rangeCount){let n;for(n=e.focusNode;n&&!n.classList;)n=n.parentNode;if(n&&n.classList.contains("inputField")){for(;n&&!n.nextSibling&&n!=this.div;)n=n.parentNode;if(n&&n!=this.div)return n=n.nextSibling,this.setCurPos(n,n.nodeType==Node.TEXT_NODE&&n.textContent.startsWith(" ")?1:0),t.preventDefault(),t.stopPropagation(),!0}}return!1}saveValue(){this.oldValue=this.div.innerHTML;const t=window.getSelection();if(t&&t.focusNode){const e=Array.from(this.div.childNodes);this.oldFocusElemIndex=e.findIndex((e=>e===t.focusNode)),this.oldFocusOffset=t.focusOffset}else this.oldFocusElemIndex=null}restoreValue(){if(null!==this.oldValue){this.div.innerHTML=this.oldValue;const t=window.getSelection();t&&(t.removeAllRanges(),null!==this.oldFocusElemIndex&&this.oldFocusElemIndex>-1&&this.setCurPos(this.div.childNodes[this.oldFocusElemIndex],this.oldFocusOffset))}}setCurPos(t,e){const n=window.getSelection();if(n){const i=document.createRange();i.setStart(t,e),i.collapse(!0),n.removeAllRanges(),n.addRange(i)}}normalize(){let t,e,n=null;const i=window.getSelection();if(i&&i.getRangeAt&&i.rangeCount){let r=i.focusNode;if(r&&r.nodeType==Node.TEXT_NODE&&(r.previousSibling&&r.previousSibling.nodeType==Node.TEXT_NODE||r.nextSibling&&r.nextSibling.nodeType==Node.TEXT_NODE)){for(n=i.focusOffset,e=r.parentElement;r.previousSibling&&r.previousSibling.nodeType==Node.TEXT_NODE;)r=r.previousSibling,n+=r.textContent.length;t=r.previousSibling}}if(this.div.normalize(),null!==n){const r=t?t.nextSibling:e.firstChild,o=document.createRange();o.setStart(r,n),o.collapse(!0),i.removeAllRanges(),i.addRange(o)}}getTextPos(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t&&(t=window.getSelection()),t&&t.focusNode){let e=t.focusOffset,n=t.focusNode;for(;(n=n.previousSibling||n.parentNode)&&n!=this.div&&n;)n.textContent&&(e+=n.textContent.length);const i={textPos:e};for(n=t.focusNode;n&&n!=this.div&&!n.classList;)n=n.parentNode;return n.classList&&n.classList.contains("frac")&&(n.classList.contains("top")&&(i.class="frac top"),n.classList.contains("bottom")&&(i.class="frac bottom")),i}return{}}extract(){let t=this.div.innerHTML;return this.extractReplaces.forEach((e=>{t=t.replaceAll(e.from,e.to)})),t.trim()}getState(){return JSON.stringify(this.div.innerHTML)}setState(t){try{this.div.innerHTML=JSON.parse(t)}catch(t){console.error(t)}var e;(e=this).stage&&e.stage.isDemoAni&&e.stage.isDemoAni.endAni&&e.stage.isDemoAni.endAni(!1),e.base&&e.base.sendChangeState(e)}scoreDef(){return this.scoreVariableName||this.FSMVariableName?{[this.scoreVariableName||`V_Input_${this.FSMVariableName}`]:this.extract()}:{}}}class d extends u{constructor(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i={toolbar:[],toolbarDirection:"column",toolbarContainerStyles:{},toolbarCellStyles:{},toolbarCellSpanStyles:{}};n(i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),super(t,i,e),this.toolbarContainer=document.createElement("DIV"),this.toolbarContainer.classList.add("toolbar",`ti${this.toolbarDirection}`,"disabled"),this.toolbarContainerStyles.left||(this.toolbarContainerStyles.left=this.divStyles.width),this.toolbarContainerStyles.top||(this.toolbarContainerStyles.top="0px"),this.setStyles(this.toolbarContainer,this.toolbarContainerStyles),this.toolbar.forEach(((t,e)=>{const n=document.createElement("DIV");this.setStyles(n,this.toolbarCellStyles),["mousedown","touchstart"].forEach((t=>n.addEventListener(t,function(t){document.activeElement&&!this.toolbarContainer.classList.contains("disabled")&&this.div.contains(document.activeElement)&&this.insert(e,t)}.bind(this))));const i=document.createElement("SPAN");this.setStyles(i,this.toolbarCellSpanStyles),n.appendChild(i),i.innerHTML=t.display,this.toolbarContainer.appendChild(n),t.extractReplace&&t.extractReplace.from&&t.extractReplace.to&&this.extractReplaces.push(t.extractReplace)})),this.outerDiv.appendChild(this.toolbarContainer),this.div.addEventListener("focus",(()=>this.toolbarContainer.classList.remove("disabled")),{capture:!0}),this.div.addEventListener("blur",(()=>this.toolbarContainer.classList.add("disabled")),{capture:!0})}insert(t,e){if(this.toolbar[t].dontInsertRecursive){const t=window.getSelection();if(t&&t.focusNode){let e=t.focusNode;for(;e&&(!e.classList||!e.classList.contains("textareaInserts")&&!e.classList.contains("inserted"));)e=e.parentNode;if(e.classList&&e.classList.contains("inserted"))return}}this.pasteHtmlAtCaret(this.toolbar[t].insert||this.toolbar[t].display,!this.toolbar[t].noExtraSpaces,this.toolbar[t].logName)&&(this.ev_input(),e.preventDefault(),e.stopPropagation()),this.base&&this.base.sendChangeState(this)}}const h=[{display:"&plus;",logName:"plus"},{display:"&minus;",logName:"minus"},{display:"&sdot;",logName:"dot"},{display:"&ratio;",logName:"ratio"},{display:"&equals;",logName:"equals"}],f=[{display:'<div class="frac"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MC4wMDIiIGhlaWdodD0iMTA2Ljg5MyIgdmlld0JveD0iMCAwIDIzLjgxMyAyOC4yODIiIHhtbG5zOnY9Imh0dHBzOi8vdmVjdGEuaW8vbmFubyI+PHBhdGggZD0iTTUuOTUzLjM4M2gxMS45MDZ2MTAuNTgzSDUuOTUzem0wIDE2LjkzM2gxMS45MDZ2MTAuNTgzSDUuOTUzeiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii43NjUiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNMCAxNC4xNDFoMjMuODEyIiBmaWxsPSIjZDg2MjZjIiBmaWxsLW9wYWNpdHk9Ii4yNjIiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxLjA2NSIvPjwvc3ZnPg=="></div>',insert:'<div contenteditable="false" class="frac"><span contenteditable="true" class="frac top startCursorPos inputField"></span><span contenteditable="true" class="frac bottom inputField"></span></div>',dontInsertRecursive:!0,logName:"fraction",extractReplace:{from:/<div[^>]*class="frac[^>]*>\s*<span[^>]*class="frac top[^>]*>(.*?)<\/span>\s*<span[^>]*class="frac bottom[^>]*>(.*?)<\/span>\s*<\/div>/g,to:"($1)/($2)"}}],p=h.concat(f);[].concat(f).concat(p),p.concat([{display:"%",logName:"percent"}]);class g extends d{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=Object.assign({},{toolbarCellWidth:22,inputHeight:22,toolbarDirection:"row",multiLine:!1,stripTags:!0},e),r={position:"absolute",left:"0px",top:`${i.toolbarCellWidth}px`,height:`${i.inputHeight}px`,"vertical-align":"middle",overflow:"hidden"};i.divStyles=Object.assign(r,i.divStyles||{});const o=i.divStyles.width.match("([0-9]+)px"),s={left:(o?o[1]:100)-i.toolbar.length*i.toolbarCellWidth+"px",top:"0px"};i.toolbarContainerStyles=Object.assign(s,i.toolbarContainerStyles||{});const a={width:`${i.toolbarCellWidth}px`,height:`${i.toolbarCellWidth}px`};i.toolbarCellStyles=Object.assign(a,i.toolbarCellStyles||{}),super(t,i,n)}getOpRE(t,e,n,i){const r=`(?:${e.map((e=>`(?:${e.map((t=>t.toString().replace(/[.,]/,"[.,]"))).join(`\\s*(?:${t})\\s*`)})`)).join("|")})`;if(null!=n){n=n.toString().replace(/[.,]/,"[.,]");const t=i?"?":"";return new RegExp(`^(?:(?:(?:${n}\\s*)${t}(=|=)\\s*)${r}|${r}(?:\\s*(=|=)(?:\\s*${n})${t})${t})$`)}return new RegExp(null===n?`^${r}$`:`(?:^|\\s|[^0-9,.])${r}(?:\\s|[^0-9,.]|$)`)}isOpRE(t,e,n,i){return this.div.innerHTML.trim().match(this.getOpRE(t,e,n,i))}isSumRE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.isOpRE("\\+",t,e,n)}isDiffRE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.isOpRE("-|−",t,e,n)}isMultRE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.isOpRE("\\*|⋅|•|●",t,e,n)}isDivRE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.isOpRE("[/:]|∶",t,e,n)}perm(t){let e=[];for(let n=0;n<t.length;n+=1){let i=this.perm(t.slice(0,n).concat(t.slice(n+1)));if(i.length)for(let r=0;r<i.length;r+=1)e.push([t[n]].concat(i[r]));else e.push([t[n]])}return e}combinations(t){const e=[],n=Math.pow(2,t.length);for(let i=0;i<n;i++){let n=[];for(let e=0;e<t.length;e++)i&Math.pow(2,e)&&n.push(t[e]);n.length&&e.push(n)}return e}allCombPerm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=this.combinations(t).filter((t=>t.length>=e));let i=[];return n.forEach((t=>i=i.concat(this.perm(t)))),i}}class v extends g{constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s="string"==typeof n?document.querySelector(n):n;i.divStyles={width:`${i.width>0?i.width:s.offsetWidth+i.width}px`},i.toolbar=h,i.inputRegexp="^([0-9]*(?:[,.][0-9]*)?|[ +*/:=-]|−|⋅|•|●|∶|=)*$",super(n,i,r),i.dataSettings&&i.dataSettings.scoringPattern&&this.parseScoringPattern(i.dataSettings.scoringPattern,i.dataSettings.variablePrefix),function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!i)return n.parseScoringVals=()=>{},void(n.computeScoringVals=()=>{});const o=new i;Object.assign(r,{isNumUnit:e,isBetween:t,match:(t,e)=>t.toString().match(e),strEqual:(t,e)=>t.toLowerCase==e.toLowerCase});for(const t in r)o.functions[t]=r[t];n.parseScoringVals=function(t){if(t.dataSettings&&t.dataSettings.scoringVals&&this.scoreDef){const e=t.dataSettings.scoringVals,n=this.scoreDef();if("object"==typeof n){const t=Object.keys(n);t.length>0&&e.forEach((e=>{let n=e.condition;if(n){let i=n;const r=n.matchAll(/\$\{([^}]*)}/g);for(const e of r)if(0==e[1].length)l("Variablen-Name '${}' in Scoring nicht zulässig");else{const n=new RegExp(e[1],"i"),r=t.filter((t=>t.match(n)));r.length>1?(l(`Variablen-Name '\${${e[1]}}' in Scoring ist nicht eindeutig`),i=""):0==r.length?(l(`Variablen-Name '\${${e[1]}}' in Scoring unbekannt`),i=""):i=i.replace(e[0],r[0])}if(i){[[/(?<![=!><])=(?![=!])/g,`Wertzuweisung ()=) statt Vergleichsoperator (==) in "${n}" gefunden! Ist das beabsichtigt?`],[/<>/g,`Zeichenkette (<>) stat (!=) in "${n}" gefunden! Ist das beabsichtigt?`],[/(?<!\|)(\|)(?!\|)/g,`Einzelnes | statt || in "${n}" gefunden! Ist das beabsichtigt?`],[/(?<!&)&(?!\&)/g,`Einzelnes & statt && in "${n}" gefunden! Ist das beabsichtigt?`]].forEach((t=>{let[e,n]=t;i.match(e)&&l(n)})),"scoringVals"in this||(this.scoringVals={});try{this.scoringVals[e.val]=o.parse(i)}catch(t){l(`Fehler (${t}) in Scoring-Condition: ${n}`)}}}}))}}},n.computeScoringVals=function(t){if(this.scoringVals){let e=null;const n=Object.entries(this.scoringVals);for(let i=0;null==e&&i<n.length;i++){const[r,o]=n[i];try{o.evaluate(t)&&(e=r)}catch(t){l("Error in scoring-condition")}}const i=Number(e);t[`S_${this.dataSettings.variablePrefix}`]=null!==e&&NaN!==i?i:e}}}(this,o.Parser),this.parseScoringVals(i)}parseScoringPattern(t,e){this.scoringPattern={};const n=new RegExp("(\\d+(?:[,.]\\d+)?) *((?:([\\-+*\\/]) *(?:\\d+(?:[,.]\\d+)?) *)+)(\\[ *= *(\\d+(?:[,.]\\d+)?) *\\] *|= *(\\d+(?:[,.]\\d+)?) *)?"),i=new RegExp("(\\d+(?:[,.]\\d+)?)","g");t.forEach((t=>{const r=t.pattern.trim().match(n);if(r){const n={"+":"\\+","-":"-|−","*":"\\*|⋅|•|●","/":"[/:]|∶"}[r[3]],o=[r[1]];for(const t of r[2].matchAll(i))o.push(t[0]);let s,a;r[4]?(s=r[5]||r[6],a=void 0!==r[5]):(s=t.add?void 0:null,a=!1);const l=this.getOpRE(n,t.perm?this.perm(o):[o],s,a);this.scoringPattern[`V_Score_${e}_${t.name}`]=l}}))}scoreDef(){const t={[`V_Input_${this.dataSettings.variablePrefix}`]:this.extract()};if(this.scoringPattern){const e=this.div.innerHTML.trim();Object.entries(this.scoringPattern).forEach((n=>{let[i,r]=n;return t[i]=e.match(r)?1:0}))}return this.computeScoringVals&&this.computeScoringVals(t),t}}const b="extres_config.json",m="extres_config.schema.json";function y(){fetch(b).then((t=>{if(!t.ok)throw new Error(`ExtRes: Error reading '${b}'!`);return t.json()})).then((t=>function(t){if("string"==typeof t)try{t=JSON.parse(t,!0)}catch(t){return void console.error(`Format-Error in JSON file '${b}'`)}const e=a(t),n=new s;e.dataSettings&&(n.dataSettings=e.dataSettings),new Promise((t=>{e.dataSettings&&e.dataSettings.scoringVals&&e.dataSettings.scoringVals.length>0?i.e(35).then(i.bind(i,6830)).then((e=>t({Parser:e.Parser}))):t({})})).then((i=>{const r=new v("#container",e,n,i);!function(t,e){if(!t.statusVarDef&&e.dataSettings&&e.dataSettings.variablePrefix){const n=`V_Status_${e.dataSettings.variablePrefix}`;t.statusVarDef=function(){return{[n]:+this.getDefaultChangeState()}}}}(r,t),r.getState&&(window.getState=r.getState.bind(r)),r.setState&&(window.setState=r.setState.bind(r))}))}(t))).catch((t=>console.error(t)))}document.addEventListener("DOMContentLoaded",(function(){!function(){const t=()=>{const t=window.location.pathname.match(/\/([^/]+)\/[^/]*$/);return t?t[1]:"."};window.addEventListener("message",(e=>{try{const{callId:n}=JSON.parse(e.data);void 0!==n&&n.includes("importJsonData")&&fetch(m).then((t=>{if(!t.ok)throw new Error(`ExtRes: Error reading '${m}'!`);return t.json()})).then((e=>{const i={jsonSchema:e,configFileName:t()+"/"+b,callId:n};window.parent.postMessage(JSON.stringify(i),"*")})).catch((t=>console.error(t)))}catch(t){}}),!1)}(),y()}))})()})();